---
import Layout from '../../layouts/Layout.astro';

const backgrounds = [
  {
    name: 'Modern Grid',
    id: 'grid',
    class: 'bg-grid',
    css: `background-size: 40px 40px;
background-image: linear-gradient(to right, rgba(255, 255, 255, 0.05) 1px, transparent 1px),
linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 1px, transparent 1px);`
  },
  {
    name: 'Dot Matrix',
    id: 'dots',
    class: 'bg-dots',
    css: `background-size: 20px 20px;
background-image: radial-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px);`
  },
  {
    name: 'Subtle Noise',
    id: 'noise',
    class: 'bg-noise',
    css: `/* Requires an svg file or data url */
background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.15'/%3E%3C/svg%3E");`
  },
  {
    name: 'Diagonal Stripes',
    id: 'stripes',
    class: 'bg-stripes',
    css: `background-image: repeating-linear-gradient(
  45deg,
  rgba(255, 255, 255, 0.03) 0px,
  rgba(255, 255, 255, 0.03) 1px,
  transparent 1px,
  transparent 10px
);`
  },
  {
    name: 'Dark Gradient',
    id: 'gradient',
    class: 'bg-gradient',
    css: `background: radial-gradient(circle at 50% 50%, #1a1a1a 0%, #000000 100%);`
  },
  {
    name: 'Midnight Mesh',
    id: 'mesh',
    class: 'bg-mesh',
    css: `background-color: #000000;
background-image: 
  radial-gradient(at 0% 0%, rgba(76, 29, 149, 0.3) 0px, transparent 50%),
  radial-gradient(at 100% 100%, rgba(37, 99, 235, 0.3) 0px, transparent 50%);`
  }
];
---

<Layout>
  <div class="text-center mb-12">
    <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-b from-white to-white/60 mb-3">CSS Backgrounds</h1>
    <p class="text-white/50">Curated collection of drop-in CSS background snippets.</p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {backgrounds.map((bg) => (
      <div class="group relative bg-[#111] border border-white/10 rounded-xl overflow-hidden hover:border-white/20 transition-all">
        <!-- Preview -->
        <div class={`h-48 w-full ${bg.class}`} id={`preview-${bg.id}`}></div>
        
        <!-- Info & Actions -->
        <div class="p-4 flex items-center justify-between border-t border-white/5 bg-[#0a0a0a]">
           <span class="font-medium text-white/80">{bg.name}</span>
           <button class="copy-btn px-3 py-1.5 text-xs font-medium rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors" data-css={bg.css}>
             Copy CSS
           </button>
        </div>
      </div>
    ))}
  </div>
</Layout>

<style>
  .bg-grid {
    background-size: 40px 40px;
    background-image: linear-gradient(to right, rgba(255, 255, 255, 0.05) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
  }
  .bg-dots {
    background-size: 20px 20px;
    background-image: radial-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px);
  }
  .bg-noise {
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.15'/%3E%3C/svg%3E");
  }
  .bg-stripes {
    background-image: repeating-linear-gradient(
      45deg,
      rgba(255, 255, 255, 0.03) 0px,
      rgba(255, 255, 255, 0.03) 1px,
      transparent 1px,
      transparent 10px
    );
  }
  .bg-gradient {
    background: radial-gradient(circle at 50% 50%, #1a1a1a 0%, #000000 100%);
  }
  .bg-mesh {
    background-color: #000000;
    background-image: 
      radial-gradient(at 0% 0%, rgba(76, 29, 149, 0.3) 0px, transparent 50%),
      radial-gradient(at 100% 100%, rgba(37, 99, 235, 0.3) 0px, transparent 50%);
  }
</style>

<script>
  document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const css = (btn as HTMLElement).dataset.css || '';
      navigator.clipboard.writeText(css);
      
      const originalText = btn.innerText;
      btn.innerText = 'Copied!';
      btn.classList.add('bg-green-500/20', 'text-green-400');
      btn.classList.remove('bg-white/10', 'text-white');
      
      setTimeout(() => {
        btn.innerText = originalText;
        btn.classList.remove('bg-green-500/20', 'text-green-400');
        btn.classList.add('bg-white/10', 'text-white');
      }, 2000);
    });
  });
</script>
